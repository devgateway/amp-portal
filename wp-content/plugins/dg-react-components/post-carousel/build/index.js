!function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=19)}([function(t,e){t.exports=window.wp.element},function(t,e){t.exports=window.wp.components},function(t,e){t.exports=window.wp.i18n},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,o){var n=o(13),r=o(14),a=o(15),s=o(16);t.exports=function(t){return n(t)||r(t)||a(t)||s()},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function o(e){return t.exports=o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.default=t.exports,t.exports.__esModule=!0,o(e)}t.exports=o,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=new Array(e);o<e;o++)n[o]=t[o];return n},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=window.wp.blocks},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function o(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,o){var n=o(17);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,o){var n=o(18).default,r=o(3);t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?r(t):e},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=window.wp.blockEditor},function(t,e,o){var n=o(6);t.exports=function(t){if(Array.isArray(t))return n(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,o){var n=o(6);t.exports=function(t,e){if(t){if("string"==typeof t)return n(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(t,e):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function o(e,n){return t.exports=o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.default=t.exports,t.exports.__esModule=!0,o(e,n)}t.exports=o,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function o(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=o=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=o=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),o(e)}t.exports=o,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,o){"use strict";o.r(e);var n=o(2),r=o(7),a=o(0),s=o(4),u=o.n(s),i=o(8),l=o.n(i),c=o(9),p=o.n(c),f=o(3),y=o.n(f),d=o(10),x=o.n(d),b=o(11),m=o.n(b),h=o(5),g=o.n(h),v=o(12),_=o(1);var O=function(t){x()(s,t);var e,o,r=(e=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=g()(e);if(o){var r=g()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return m()(this,t)});function s(t){var e;return l()(this,s),(e=r.call(this,t)).state={taxonomyValues:[],types:null,taxonomies:null,loading:!0},e.onTypeChanged=e.onTypeChanged.bind(y()(e)),e.onTaxonomyChanged=e.onTaxonomyChanged.bind(y()(e)),e.getTaxonomyValues=e.getTaxonomyValues.bind(y()(e)),e.onCategoryChanged=e.onCategoryChanged.bind(y()(e)),e}return p()(s,[{key:"componentDidUpdate",value:function(t,e,o){var n=this.props,r=(n.setAttributes,n.attributes),a=(r.type,r.taxonomy);r.count,t.attributes&&(t.attributes.type,a!=t.attributes.taxonomy&&this.getTaxonomyValues())}},{key:"componentDidMount",value:function(){this.getTypes(),this.getTaxonomies();var t=this.props,e=(t.setAttributes,t.attributes),o=(e.type,e.taxonomy);e.count,"none"!=o&&this.getTaxonomyValues()}},{key:"onTypeChanged",value:function(t){var e=this.props.setAttributes;e({categories:[]}),e({taxonomy:"none"}),e({type:t})}},{key:"onTaxonomyChanged",value:function(t){var e=this.props.setAttributes;e({categories:[]}),e({taxonomy:t})}},{key:"onCategoryChanged",value:function(t,e){var o=this.props,n=o.setAttributes,r=o.attributes.categories;if(t){var a=u()(r);a.push(e),n({categories:a})}else n({categories:r.filter((function(t){return t!=e}))})}},{key:"getTaxonomyValues",value:function(){var t=this,e=this.props,o=(e.setAttributes,e.attributes),n=(o.type,o.taxonomy);o.count,wp.apiFetch({path:"/wp/v2/"+n+"?per_page=100"}).then((function(e){t.setState({taxonomyValues:e})}))}},{key:"getTaxonomies",value:function(){var t=this;wp.apiFetch({path:"/wp/v2/taxonomies?per_page=100"}).then((function(e){t.setState({taxonomies:e})}))}},{key:"getTypes",value:function(){var t=this;wp.apiFetch({path:"/wp/v2/types?per_page=100"}).then((function(e){t.setState({types:e,loading:!1})}))}},{key:"typeOptions",value:function(){var t=this.props,e=(t.setAttributes,t.attributes),o=(e.count,e.type,e.taxonomy,e.category,this.state),n=o.types;return o.taxonomies,o.taxonomyValues,n?Object.keys(n).filter((function(t){return-1==["page","attachment","wp_block"].indexOf(t)})).map((function(t){return{slug:n[t].slug,label:n[t].name,value:n[t].rest_base}})):[]}},{key:"taxonomyOptions",value:function(){var t,e=this.props.attributes.type,o=this.state,n=o.types,r=o.taxonomies;if(o.taxonomyValues,n){t=this.typeOptions().filter((function(t){return t.value==e}))[0].slug;var a=n&&r?Object.keys(r).filter((function(e){return r[e].types.indexOf(t)>-1})).map((function(e){return{label:n[t].name+" -> "+r[e].name,value:r[e].rest_base}})):[];return[{label:"None",value:"none"}].concat(u()(a))}return[]}},{key:"categoriesOptions",value:function(){var t=this.state,e=(t.types,t.taxonomies,t.taxonomyValues),o=e&&e.map((function(t){return{label:t.name,value:t.id}}));return console.log(o),o}},{key:"render",value:function(){var t=this,e=this.props,o=e.setAttributes,r=e.attributes,s=r.count,u=r.type,i=r.taxonomy,l=r.categories,c="editing=true&data-type=".concat(u,"&data-taxonomy=").concat(i,"&data-categories=").concat(l,"&data-items=").concat(s);return Object(a.createElement)("div",null,Object(a.createElement)(v.InspectorControls,null,Object(a.createElement)(_.Panel,{header:Object(n.__)("Carousel Configuration")},Object(a.createElement)(_.PanelBody,null,Object(a.createElement)(_.PanelRow,null,Object(a.createElement)(_.__experimentalNumberControl,{isShiftStepEnabled:!0,onChange:function(t){return o({count:t})},shiftStep:10,value:s,label:Object(n.__)("Items")})),Object(a.createElement)(_.PanelRow,null,Object(a.createElement)(_.SelectControl,{label:Object(n.__)("Post Type"),options:this.typeOptions(),value:u,onChange:this.onTypeChanged})),Object(a.createElement)(_.PanelRow,null,Object(a.createElement)(_.SelectControl,{label:Object(n.__)("Use a taxonomy filter "),options:this.taxonomyOptions(),value:i,onChange:this.onTaxonomyChanged})),"none"!=i&&this.categoriesOptions().map((function(e){return Object(a.createElement)(_.PanelRow,null,Object(a.createElement)(_.CheckboxControl,{label:e.label,onChange:function(o){return t.onCategoryChanged(o,e.value)},checked:l.indexOf(e.value)>-1}))}))))),Object(a.createElement)("iframe",{style:{height:"500px",width:"100%"},scrolling:"no",src:"http://amppp-haiti-pr-83-tc9.ampsite.net/#/en/embeddable/postscarousel?"+c}))}}]),s}(a.Component);Object(r.registerBlockType)("dg-components/post-carousel",{title:Object(n.__)("Posts Carousel","dg-components"),icon:"admin-site-alt",category:"react-blocks",attributes:{count:{type:"number",default:3},type:{type:"string",default:"posts"},taxonomy:{type:"string",default:"none"},categories:{type:"array",default:[]}},edit:O,save:function(t){t.setAttributes;var e=t.attributes,o=e.count,n=e.type,r=e.taxonomy,s=e.categories;return Object(a.createElement)("div",{className:{},style:{}},Object(a.createElement)("div",{"data-items":o,"data-type":n,"data-taxonomy":r,"data-categories":s.toString(),className:"tcdi-component","data-component":"postsCarousel"}))}})}]);